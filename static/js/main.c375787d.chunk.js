(this["webpackJsonpfuture-google-books"]=this["webpackJsonpfuture-google-books"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(17),i=n.n(r),o=(n(34),n(35),n(14)),a=n(3),u=(n(36),n(0)),l=function(e){var t=e.children,n=e.className,s=void 0===n?"":n;return Object(u.jsx)("div",{className:"Container "+s,children:t})},j=(n(38),n(8)),h=n.n(j),d=n(10),b=n(16),O=n(9),m=n(12),f=(n(40),["children","className"]),v=function(e){var t=e.children,n=e.className,s=void 0===n?"":n,c=Object(m.a)(e,f);return Object(u.jsx)("button",Object(O.a)(Object(O.a)({type:"button",className:s+" Button"},c),{},{children:t}))},x=(n(41),["className","type"]),p=function(e){var t=e.className,n=void 0===t?"":t,s=e.type,c=void 0===s?"text":s,r=Object(m.a)(e,x);return Object(u.jsx)("input",Object(O.a)({className:n+" Input",type:c},r))},g=(n(42),n.p+"static/media/search.9748c2d7.svg"),_=(n(43),["children","className"]),k=function(e){var t=e.children,n=e.className,s=void 0===n?"":n,c=Object(m.a)(e,_);return Object(u.jsx)("div",Object(O.a)(Object(O.a)({className:s+" Select"},c),{},{children:t}))},y=n(19),N=n(23),w=n(25),S=n(26),C=n(2),F=new(function(){function e(){Object(w.a)(this,e),this._books=[],this._limit=30,this._startIndex=0,this._searchValue="",this._errorOnRequest="",this._categories={all:"\u0412\u0441\u0435",art:"\u0418\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e",biography:"\u0411\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u044f",computers:"\u041a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u044b",history:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",medical:"\u041c\u0435\u0434\u0438\u0446\u0438\u043d\u0430",poetry:"\u041f\u043e\u044d\u0437\u0438\u044f"},this._sortingTypes={relevance:"\u041f\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044e",newest:"\u041f\u043e \u043d\u043e\u0432\u0438\u0437\u043d\u0435"},this._isFetching=!1,this._selectedCategory="all",this._selectedSortingType="relevance",this._totalBooksOnQuery=0,Object(C.d)(this)}return Object(S.a)(e,[{key:"setIsFetching",value:function(e){return this._isFetching=e,this}},{key:"setSelectedCategory",value:function(e){return this._selectedCategory=e,this}},{key:"setSelectedSortingType",value:function(e){return this._selectedSortingType=e,this}},{key:"setSearchValue",value:function(e){return this._searchValue=e,this}},{key:"setBooks",value:function(e){return this._startIndex=e.length,this._books=e,this}},{key:"setMoreBooks",value:function(e){if(e)return this._books=[].concat(Object(N.a)(this._books),Object(N.a)(e)),this.setStartIndex(e.length),this}},{key:"setErrorOnRequest",value:function(e){return this._errorOnRequest=e,this}},{key:"setStartIndex",value:function(e){return this._startIndex+=e,this}},{key:"setTotalBooksOnQuery",value:function(e){return this._totalBooksOnQuery=e,this}},{key:"errorOnRequest",get:function(){return this._errorOnRequest}},{key:"books",get:function(){return this._books}},{key:"limit",get:function(){return this._limit}},{key:"startIndex",get:function(){return this._startIndex}},{key:"searchValue",get:function(){return this._searchValue}},{key:"categories",get:function(){return this._categories}},{key:"sortingTypes",get:function(){return this._sortingTypes}},{key:"selectedCategory",get:function(){return this._selectedCategory}},{key:"selectedSortingType",get:function(){return this._selectedSortingType}},{key:"totalBooksOnQuery",get:function(){return this._totalBooksOnQuery}},{key:"isFetching",get:function(){return this._isFetching}}]),e}()),I="&maxResults=".concat(F.limit);function B(){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(R());case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,t.ok){e.next=10;break}throw new Error("Something went wrong");case 10:if("items"in n){e.next=12;break}throw new Error("No results on request");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return q.apply(this,arguments)}function q(){return(q=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(R(Object(C.h)(F.startIndex)));case 2:return t=e.sent,e.next=5,t.json();case 5:if("items"in(t=e.sent)){e.next=8;break}throw new Error("No results on request");case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=F.searchValue,n="&orderBy=".concat(F.selectedSortingType),s="all"===F.selectedCategory?"":"+subject:".concat(F.selectedCategory),c="&startIndex=".concat(e||0);return"https://www.googleapis.com/books/v1/volumes?q="+t+s+I+c+n+"&key=AIzaSyCex1n3zwYSwtQ8FK1UgUaFZNlZy1r9uWA"}var Q=Object(y.a)((function(){var e=Object(C.h)(F.categories),t=Object(C.h)(F.sortingTypes),n=Object(a.g)(),c=Object(a.h)().pathname,r=Object(s.useRef)(),i=Object(s.useRef)(),o=Object(s.useState)(!1),l=Object(b.a)(o,2),j=l[0],O=l[1],m=Object(s.useState)(!1),f=Object(b.a)(m,2),x=f[0],_=f[1];function y(){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(h.a.mark((function e(){var t,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F.setIsFetching(!0),e.next=4,B();case 4:t=e.sent,s=t.items,r=t.totalItems,F.setBooks(s).setTotalBooksOnQuery(r).setErrorOnRequest(""),"/"!==c&&n.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),F.setErrorOnRequest(e.t0.message).setBooks([]);case 14:return e.prev=14,F.setIsFetching(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})))).apply(this,arguments)}Object(s.useEffect)((function(){var e=function(e){j&&r.current&&!r.current.contains(e.target)&&O(!1),x&&i.current&&!i.current.contains(e.target)&&_(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[j,x]);return Object(u.jsxs)("div",{className:"Form",children:[Object(u.jsxs)("div",{className:"Form__search-line",children:[Object(u.jsx)(p,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043d\u0438\u0433\u0438",onInput:function(e){F.setSearchValue(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&y()},value:Object(C.h)(F.searchValue),className:"Form__search-field"}),Object(u.jsx)(v,{className:"Form__button",onClick:y,children:Object(u.jsx)("img",{src:g,width:"20",alt:""})})]}),Object(u.jsxs)("div",{className:"Form__filters",children:[Object(u.jsxs)("div",{className:"Form__select",children:[Object(u.jsx)("div",{className:"Form__filter-name",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"}),Object(u.jsx)("div",{ref:r,children:Object(u.jsxs)(k,{children:[Object(u.jsx)("button",{type:"button",className:"".concat("Select__selected "+(j?"Select__selected_active":"")),onClick:function(){return O(!j)},children:e[Object(C.h)(F.selectedCategory)]}),j?Object(u.jsx)("ul",{className:"Select__items",children:Object.keys(e).map((function(t){return Object(u.jsx)("li",{className:"Select__item",onClick:function(){return e=t,F.setSelectedCategory(e),void O(!1);var e},children:Object(u.jsx)("button",{type:"button",children:e[t]})},t)}))}):""]})})]}),Object(u.jsxs)("div",{className:"Form__select",children:[Object(u.jsx)("div",{className:"Form__filter-name",children:"\u041f\u043e \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438"}),Object(u.jsx)("div",{ref:i,children:Object(u.jsxs)(k,{children:[Object(u.jsx)("button",{type:"button",className:"".concat("Select__selected "+(x?"Select__selected_active":"")),onClick:function(){return _(!x)},children:t[Object(C.h)(F.selectedSortingType)]}),x&&Object(u.jsx)("ul",{className:"Select__items",children:Object.keys(t).map((function(e){return Object(u.jsx)("li",{className:"Select__item",onClick:function(){return t=e,_(!1),void F.setSelectedSortingType(t);var t},children:Object(u.jsx)("button",{type:"button",children:t[e]})},e)}))})]})})]})]})]})})),V=Q,L=(n(51),function(){return Object(u.jsxs)("div",{className:"SearchForm",children:[Object(u.jsx)("h1",{className:"SearchForm__title",children:"\u041f\u043e\u0438\u0441\u043a \u043a\u043d\u0438\u0433"}),Object(u.jsx)(V,{})]})}),A=function(e){var t,n=e.location.state.volumeInfo,s=n?null===(t=n.imageLinks)||void 0===t?void 0:t.thumbnail:"",c=n.title,r=n.authors,i=n.description,o=n.categories,a=null===r||void 0===r?void 0:r.join(", "),j=null===o||void 0===o?void 0:o.join("/");return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(L,{}),Object(u.jsx)(l,{children:Object(u.jsxs)("div",{className:"Book",children:[Object(u.jsx)("div",{className:"Book__image",children:Object(u.jsx)("img",{src:s,alt:""})}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:j}),Object(u.jsx)("h1",{children:c}),Object(u.jsx)("div",{children:a}),Object(u.jsx)("div",{children:i})]})]})})]})},M=(n(52),n.p+"static/media/book.9e033eb4.png"),U=function(e){var t=e.book;return Object(u.jsxs)(o.b,{to:{pathname:"/book/".concat(t.id,"}"),state:t},className:"Card",children:[Object(u.jsx)("div",{className:"Card__image-wrap",children:Object(u.jsx)("img",{src:t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.thumbnail:M,className:"Card__image",alt:""})}),Object(u.jsx)("p",{className:"Card__meta",children:t.volumeInfo.categories&&t.volumeInfo.categories[0]}),Object(u.jsx)("h3",{className:"Card__title",children:t.volumeInfo.title}),t.volumeInfo.authors&&Object(u.jsx)("p",{className:"Card__meta",children:function(e){for(var t=[],n=0;n<e.length;n++)if(t.push("".concat(e[n])),3===n)return t.join(", ");return t.join(", ")}(t.volumeInfo.authors)})]})},z=(n(53),n(54),function(){return Object(u.jsxs)("div",{className:"Spinner",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})}),J=Object(y.a)((function(){var e=Object(C.h)(F.books),t=function(){var e=Object(d.a)(h.a.mark((function e(){var t,n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F.setIsFetching(!0),e.next=4,T();case 4:t=e.sent,n=t.items,s=t.totalItems,F.setErrorOnRequest(""),F.setMoreBooks(n).setTotalBooksOnQuery(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),F.setErrorOnRequest(e.t0.message);case 14:return e.prev=14,F.setIsFetching(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(l,{children:[e&&e.length?Object(u.jsxs)("div",{className:"Cards",children:[Object(u.jsxs)("h3",{children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e \u043a\u043d\u0438\u0433 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443:"," ",F.totalBooksOnQuery]}),Object(u.jsx)("div",{className:"Cards__grid",children:e&&e.length?e.map((function(e,t){return Object(u.jsx)(U,{book:e},e.id+t)})):""}),Object(u.jsxs)("h4",{children:["\u041d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435: ",e.length]}),F.totalBooksOnQuery>F.books.length&&!F.isFetching&&!F.errorOnRequest&&Object(u.jsx)(v,{onClick:t,className:"Cards__load-btn",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451"}),F.errorOnRequest]}):Object(u.jsx)("h2",{children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}),F.isFetching&&Object(u.jsx)(z,{})]})})})),K=J,Y=n(29),Z=(n(55),function(e){var t=e.showBelow,n=Object(Y.useState)(!1),c=Object(b.a)(n,2),r=c[0],i=c[1],o=function(){window.pageYOffset>t?r||i(!0):r&&i(!1)};Object(s.useEffect)((function(){if(t)return window.addEventListener("scroll",o),function(){return window.removeEventListener("scroll",o)}}));return Object(u.jsx)(u.Fragment,{children:r&&Object(u.jsx)("button",{type:"button",className:"ScrollUpButton",onClick:function(){window.scrollTo({top:0,behavior:"smooth"})}})})}),D=[{path:"/",Component:function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(L,{}),Object(u.jsx)(K,{}),Object(u.jsx)(Z,{showBelow:300})]})}},{path:"/book/:id",Component:A}],W=function(){var e=D;return Object(u.jsxs)(a.d,{children:[e.map((function(e){var t=e.path,n=e.Component;return Object(u.jsx)(a.b,{path:t,component:n,exact:!0},t)})),Object(u.jsx)(a.a,{to:"/"})]})};var G=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(o.a,{children:Object(u.jsx)(W,{})})})};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(G,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.c375787d.chunk.js.map